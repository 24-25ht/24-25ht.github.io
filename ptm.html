<!DOCTYPE html>  
<html lang="en">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0">   
    <script src="https://cdn.jsdelivr.net/npm/moment@2.29.1/min/moment.min.js"></script>  
    <script src="https://cdn.rawgit.com/xsoh/moment-hijri/master/moment-hijri.js"></script>  
    <title>Prayer Times App</title>  
    <style>  
        body {  
            font-family: 'Arial', sans-serif;  
            background: linear-gradient(to bottom right, #f0f4f8, #d9e2ec);  
            margin: 0;  
            padding: 0;  
        }  

        header {  
            background: linear-gradient(135deg, #3498db, #2c82c9);  
            color: white;  
            padding: 30px;  
            text-align: center;  
            border-bottom: 5px solid #2980b9;  
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);  
        }  

        header h1 {  
            margin: 0;  
            font-size: 36px;  
            letter-spacing: 1px;  
        }  

        header p {  
            margin: 5px 0 0;  
            font-size: 16px;  
            font-weight: 300;  
        }  

        main {  
            display: flex;  
            flex-direction: column;  
            align-items: center;  
            padding: 40px;  
            min-height: calc(100vh - 80px);  
        }  

        #prayer-times {  
            display: flex;  
            flex-direction: column;  
            align-items: center;  
            width: 100%;  
            max-width: 500px;  
        }  

        .prayer-time {  
            background: white;  
            padding: 20px;  
            border-radius: 10px;  
            margin: 15px 0;  
            width: 100%;  
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);  
            transition: transform 0.2s, box-shadow 0.2s;  
        }  

        .prayer-time:hover {  
            transform: translateY(-5px);  
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);  
        }  

        .prayer-time label {  
            font-weight: bold;  
            margin-right: 15px;  
            font-size: 18px;  
            color: #34495e;  
        }  

        .prayer-time input[type="time"] {  
            width: 100%;  
            height: 40px;  
            padding: 10px;  
            font-size: 16px;  
            border: 2px solid #3498db;  
            border-radius: 5px;  
            box-shadow: 0 0 8px rgba(0, 0, 0, 0.1);  
            transition: border-color 0.3s, box-shadow 0.3s;  
        }  

        .prayer-time input[type="time"]:focus {  
            outline: none;  
            border-color: #2980b9;  
            box-shadow: 0 0 10px rgba(41, 128, 185, 0.5);  
        }  

        @media (max-width: 600px) {  
            header h1 {  
                font-size: 28px;  
            }  

            header p {  
                font-size: 14px;  
            }  

            .prayer-time label {  
                font-size: 16px;  
            }  

            .prayer-time input[type="time"] {  
                font-size: 14px;  
            } 
        }  
    </style>  
</head>  
<body>  
   <header>  
    <h1>Prayer Times</h1>  
    <div style="display: flex; justify-content: space-between; width: 100%;">  
        <div id="qatar-clock"></div>  
        <div id="hijri-date"></div>  
    </div>  
    <p>Doha, Qatar</p>  
</header>    
    <main>  
        <div class="date" id="qatar-clock"></div>
        <div class="dates" id="hijri-date"></div>
        <div id="prayer-times"></div>  
    </main>  
    <script>  
          function updateClocks() {
            const options = {
                year: 'numeric', month: 'long', day: 'numeric'
            };

            const qatarTime = new Date().toLocaleString("en-US", { timeZone: "Asia/Qatar", ...options });

            const qatarClockElement = document.getElementById("qatar-clock");
            if (qatarClockElement) {
                qatarClockElement.innerText = `${qatarTime}`;
            } else {
                console.error('Element with id "qatar-clock" not found');
            }
        }

        
        // Initial call to display the clock immediately
        updateClocks();

          // Get the current Hijri date and format it, setting the locale to English  
        moment.locale('en'); // Set the locale to English  
        const currentHijriDate = moment().format("iMMMM iDD, iYYYY"); // Format in Hijri  
        
        // Display the Hijri date in the <div>  
        document.getElementById('hijri-date').innerText = currentHijriDate;

        const prayerTimesElement = document.getElementById('prayer-times');  

        async function fetchPrayerTimes() {  
            const today = new Date();  
            const formattedDate = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;  
            try {  
                const response = await fetch(`https://api.aladhan.com/v1/timingsByCity/${formattedDate}?city=Doha&country=QA&x7xapikey=e6d99427bb9c623a0e9ce54f7bf2bf95&method=3&shafaq=general&tune=0%2C-2%2C-1%2C0%2C1%2C3%2C1%2C20%2C0&midnightMode=1&timezonestring=UTC&calendarMethod=UAQ`);  
                if (!response.ok) throw new Error('Network response was not ok');  
                const data = await response.json();  
                displayPrayerTimes(data.data.timings);  
            } catch (error) {  
                console.error('Error fetching prayer times:', error);  
                prayerTimesElement.innerHTML = '<p>Error fetching prayer times. Please try again later.</p>';  
            }  
        }  

        function displayPrayerTimes(timings) {  
            const adjustedTimings = {};  

            for (const [prayer, time] of Object.entries(timings)) {  
                const prayerTimeDiv = document.createElement('div');  
                prayerTimeDiv.classList.add('prayer-time');  

                const label = document.createElement('label');  
                label.textContent = `${prayer}: `;  
                
                const input = document.createElement('input');  
                input.type = 'time';  
                input.value = convertToTimeInputFormat(time);  
                input.addEventListener('change', (event) => {  
                    adjustedTimings[prayer] = event.target.value;  
                });  

                prayerTimeDiv.appendChild(label);  
                prayerTimeDiv.appendChild(input);  
                prayerTimesElement.appendChild(prayerTimeDiv);  
            }  
        }  

        function convertToTimeInputFormat(time) {  
            return time.substring(0, 5);  
        }  

        fetchPrayerTimes();  
    </script>  
</body>  
</html>